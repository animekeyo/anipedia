<!DOCTYPE html>
<html lang="en">


<!---//////////////////////////------jquery------/////////////////////////--->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!---//////////////////////////------supabase------/////////////////////////--->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script src="/scripts/supabase.js"></script>
<!---/////////////////////////------sweetalert------/////////////////////////--->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.7/dist/sweetalert2.all.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<!---/////////////////////////------hammer------/////////////////////////--->
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.js"></script>
<!---/////////////////////////------aos------/////////////////////////--->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<!---/////////////////////////------tippy------/////////////////////////--->
<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
<script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>
<link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
<!---/////////////////////////------react------/////////////////////////--->
<script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<!---/////////////////////////------firebase------/////////////////////////--->
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-functions.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-performance.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-remote-config.js"></script>
<!---/////////////////////////------MAIN SCRIPTS------/////////////////////////--->
<script src="/scripts/purl.js?clear1-111"></script>
<script src="/scripts/firebase.js?clear1-111"></script>
<script src="/scripts/tippy.js?clear1-111"></script>
<script src="/scripts/open_user.js?clear1-111"></script>
<script src="/scripts/get-view.js?clear1-100"></script>
<!----------------------------------------------------------------->
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="manifest" href="manifest.webmanifest?clear1-126">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
<style>
    @import url("/styles/style.css?clear1-80");
    .center-flex.full-wh.r5.theme-GfSHDHASH122 {
        background: var(--r3);
        margin: 2rem;
        display: flex;
        transition: 0.5s;
        flex-direction: row;
        justify-content: flex-start;
        align-items: flex-start;
        align-content: flex-start;
        overflow: hidden;
        padding: 1rem;
        gap: 0.5rem;
        width: -webkit-fill-available;
        height: -webkit-fill-available;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH1222,
    .center-flex.full-wh.r5.theme-GfSHDHASH1221 {
        background: var(--r1);
        border-radius: 10px;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH1221 {
        width: 250px;
        display: flex;
        transition: 0.1s;
        align-content: flex-start;
        justify-content: flex-start;
        align-items: flex-start;
        z-index: 2;
        padding: 1rem;
        height: -webkit-fill-available;
    }
    
    .theme-GfSHDHASH12212 {
        display: flex;
        transition: 0.1s;
        align-content: flex-start;
        justify-content: flex-start;
        align-items: flex-start;
        gap: 0.5rem;
        margin: 1rem;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH12211 {
        height: 2.5rem;
        /* background: var(--c14); */
        display: flex;
        transition: 0.1s;
        flex-direction: row;
        justify-content: flex-start;
        padding: 0.2rem 0.6rem;
        gap: 0.4rem;
        font-size: 0.9rem;
        text-transform: uppercase;
        font-family: sans-serif;
        FONT-WEIGHT: 600;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH12211:hover {
        background-color: var(--c15);
        transition: 0.1s;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH12211 svg {
        fill: var(--c6);
        width: 1.7rem;
        height: 1.7rem;
        transition: 0.1s;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH1222 {
        margin: 1rem;
        margin-left: 275px;
        z-index: 1;
        transition: 0.1s;
        align-content: flex-start;
        justify-content: flex-start;
        align-items: flex-start;
        padding: 2rem;
    }
    
    .center-flex.full-wh.r5.theme-GfSHDHASH1222 div[setpage] {
        display: none;
    }
    
    .oh {
        overflow: hidden;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form {
        width: -webkit-fill-available;
        display: flex;
        transition: 0.1s;
        flex-direction: column;
        align-content: flex-start;
        justify-content: flex-start;
        align-items: flex-start;
        gap: 0.5rem;
        font-size: 1rem;
        color: var(--c6);
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form input {
        width: 24rem;
        height: 2.5rem;
        border-radius: 5px;
        padding: 0rem 0.8rem;
        background: var(--r5);
        color: var(--c6);
        font-family: sans-serif;
        transition: 0.1s;
        FONT-WEIGHT: 600;
        letter-spacing: 0.2px;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form button {
        height: 2.5rem;
        width: 10rem;
        transition: 0.1s;
        margin-top: 1rem;
        border: unset;
        border-radius: 5px;
        color: var(--c6);
        background: var(--c7);
        font-family: sans-serif;
        FONT-WEIGHT: 600;
        letter-spacing: 0.3px;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form input[type="file"] {
        /* background: unset; */
        padding: 0.6092rem;
        margin: unset;
        height: unset;
        transition: 0.1s;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form .theme-dfXD .icon {
        height: 48px;
        width: 48px;
        background-color: var(--c7);
        border-radius: 100rem;
        margin-bottom: 1rem;
        transition: 0.1s;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form .theme-dfXD .banner {
        background-color: var(--c7);
        width: 240px;
        height: 135.99px;
        border-radius: 5px 0px 0px 5px;
        transition: 0.1s;
    }
    
    .center-flex.theme-dfXD {
        display: flex;
        align-content: flex-start;
        align-items: flex-start;
        flex-direction: row;
        justify-content: flex-end;
        width: -webkit-fill-available;
        gap: 1rem;
        margin: 1rem 0rem;
        background: var(--r4);
        padding: 1rem 0rem;
        width: 20rem;
        border-radius: 10px;
        transition: 0.1s;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd {
        /* width: fit-content; */
        margin: 1rem;
        transition: 0.1s;
        overflow: hidden;
        overflow-y: scroll;
        display: flex;
        flex-direction: column;
        align-content: flex-start;
        justify-content: flex-start;
        align-items: flex-start;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd::-webkit-scrollbar {
        display: none;
    }
    /* Hide scrollbar for IE, Edge and Firefox */
    
    .center-flex.full-wh.theme-fx-Fdsd {
        -ms-overflow-style: none;
        /* IE and Edge */
        scrollbar-width: none;
        /* Firefox */
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form h3 {
        margin: 0.5rem;
        font-size: 1.3rem;
        width: -webkit-fill-available;
        transition: 0.1s;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: unset;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd form h4 {
        margin: 1rem 0rem;
        margin-top: 0.5rem;
        color: #a7a7a7;
    }
    
    .agree-message.agree-message.prs {
        color: gray;
        font-family: sans-serif;
        letter-spacing: 0.1px;
        font-size: 1rem;
    }
    
    .center-flex.full-wh.theme-fx-Fdsd {
        height: -webkit-fill-available!important;
    }
    
    .center-flex.theme-dfXDd {
        height: 15rem;
        background: var(--r2);
        width: 25rem;
        border-radius: 10px;
        overflow: hidden;
    }
    
    .user-banner.absolute.full-bg {
        width: -webkit-fill-available;
        height: 10rem;
        background-color: var(--r3);
    }
    
    .avater.absolute.full-bg {
        border-radius: 100rem;
        width: 5.5rem;
        height: 5.5rem;
        top: 7.5rem;
        background-color: var(--r4);
        z-index: 1;
        left: 1.5rem;
        box-shadow: 0px 0px 0px 0.5rem var(--r2);
    }
</style>

<body>

    <div class="center-flex full-bg full-wh fixed theme-GfSHDHASH12">
        <div class="center-flex full-wh r5 relative theme-GfSHDHASH122">
            <div style="width: 210px;" class="center-flex full-wh r5 theme-GfSHDHASH1221">
                <div class="center-flex full-wh r5 theme-GfSHDHASH12212">

                </div>
            </div>
            <div class="center-flex full-wh r5 absolute theme-GfSHDHASH1222">

                <div setpage setpagex="My-Account" class="oh full-wh">

                    <div class="center-flex full-wh  theme-fx-Fdsd">
                        <form action="">

                            <div class="center-flex relative theme-dfXDd">
                                <div main-user-avatar class="avater absolute full-bg">

                                </div>
                                <div main-user-banner class="user-banner absolute full-bg">

                                </div>
                            </div>

                            <label for="">User Avatar</label>
                            <input user-avater type="file" icon="upload-avater" accept="image/*" name="" id="">
                            <label for="">User Name</label>
                            <input user-name-input type="text" required autocomplete="name">

                            <label for="">User Banner</label>
                            <input user-banner type="file" icon="upload-banner" accept="image/*" name="" id="">
                            <label for="">User Bio</label>
                            <input style="height: 6rem;" user-bio-input type="text" required autocomplete="name">
                            <button user-update-btn>Create</button>
                        </form>

                    </div>


                </div>
                <div setpage setpagex="Join-Server" class="oh full-wh">

                    <div class="center-flex full-wh  theme-fx-Fdsd">

                    </div>


                </div>

            </div>
        </div>
    </div>
    <script src="/scripts/com.js?clear1-7"></script>
    <script>
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                const data = firebase.database().ref('/data/users/' + user.uid);
                data.on('value', function(snapshot) {
                    if (snapshot.exists()) {
                        if (snapshot.val().displayName) {
                            const displayName = (snapshot.val() && snapshot.val().displayName);
                            const profile_picture = (snapshot.val() && snapshot.val().profile_picture);
                            const banner = (snapshot.val() && snapshot.val().banner);
                            const bio = (snapshot.val() && snapshot.val().bio);
                            const onlineState = (snapshot.val() && snapshot.val().onlineState);





                            $('[main-user-displayname]').text(displayName)
                            $('[main-user-bio]').text(bio)
                            $('[user-name-input]').val(displayName)
                            $('[user-bio-input]').val(bio)
                            $('[main-user-avatar]').css('background-image', 'url(' + profile_picture + ')')

                            if (typeof banner == "undefined") {
                                $('[main-user-banner]').css('background-image', 'url(' + profile_picture + ')')
                            } else if (typeof banner == "null") {
                                $('[main-user-banner]').css('background-image', 'url(' + profile_picture + ')')
                            } else {
                                if (banner) {
                                    $('[main-user-banner]').css('background-image', 'url(' + banner + ')')
                                }
                            }
                        }
                    }
                })

            } else {

            }
        })
        var images = ['1', '2', '3', '5', '8', '9', '10'];

        $('.theme-GfSHDHASH12').css('background-image', 'url(/images/bg' + images[Math.floor(Math.random() * images.length)] + '.jpg)');
        const data_ixo = [{
            "icon": icon_account_circle,
            "title": "My Account",
            "get": 'My-Account',
        }, {
            "icon": icon_add_link,
            "title": "Join Server",
            "get": 'Join-Server',
        }];


        $(document).on("change", 'input[type="file"]', function() {

            var $files = $(this).get(0).files;
            const appendtoc = $(this).attr('icon');
            if ($files.length) {

                // Reject big files
                if ($files[0].size > $(this).data("max-size") * 1024) {
                    console.log("Please select a smaller file");
                    return false;
                }

                // Replace ctrlq with your own API key
                var apiUrl = 'https://api.imgur.com/3/image';
                var apiKey = '4b208caca83b4c4';

                var formData = new FormData();
                formData.append("image", $files[0]);

                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": apiUrl,
                    "method": "POST",
                    "datatype": "json",
                    "headers": {
                        "Authorization": "Client-ID " + apiKey
                    },
                    "processData": false,
                    "contentType": false,
                    "data": formData,
                    beforeSend: function(xhr) {
                        swal({
                            text: "Uploading",
                            buttons: false,
                            closeOnClickOutside: false,
                        });
                    },
                    success: function(res) {
                        console.log(res.data.link);
                        console.log(appendtoc)
                        var user = firebase.auth().currentUser;
                        var pfp = res.data.link;



                    },
                    error: function() {

                        swal("Failed | 上传失败 | MAKO");
                    }
                }
                $.ajax(settings).done(function(response) {
                    console.log("Done | 成功");
                    swal({
                        title: "Done",
                        icon: "success",
                        timer: 1500,
                    });
                });
            }
        });


        $('form').on("submit", function(event) {
            event.preventDefault()

            const displayName = $('[user-name-input]').val();
            const bio = $('[user-bio-input]').val();

            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    const currentUserID = firebase.auth().currentUser.uid;
                    const database = firebase.database().ref('/data/users/' + currentUserID);
                    if (banner) {
                        database.update({
                            banner: banner,
                        }).then(
                            function() {
                                swal('banner Saved')
                            }
                        );
                    }
                    if (profile_picture) {
                        database.update({
                            profile_picture: profile_picture,
                        }).then(
                            function() {
                                swal('profile_picture Saved')
                            }
                        );
                    }
                    database.update({
                        displayName: displayName,
                        bio: bio,
                    }).then(
                        function() {
                            swal('data Saved')
                        }
                    );
                }
            });


        })
        $.each(data_ixo, function(o, v) {
            //////////BUTTONS/////////
            const data =
                '<div setbtn get="' + v.get + '" count="' + o++ + '"  class=" pointer noselect center-flex full-wh r5 theme-GfSHDHASH12211">' +
                v.icon +
                ///icon
                '<div class="center-flex r5 theme-GfSHDHASH12211c">' +
                v.title +
                ///title
                '</div>' +
                '</div>';

            //////CONTENT//////////
            //const data1 =
            // '<div setpage setpagex="' + v.get + '">' +
            // v.title +
            // '</div>';
            //$('.theme-GfSHDHASH1222').append(data1);

            ///////append to////////
            $('.theme-GfSHDHASH12212').append(data);

        });
        $('[setbtn][count="0"]').ready(function() {
            $('[setbtn][count="0"]').trigger("click");
        });
        $('[type="file"]').change(function() {
            readURL(this);
            const icon = $(this).attr('icon')

            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function(e) {
                        //$('[' + icon + ']').css('background-image', 'url(' + e.target.result + ')');
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }
        });
        $(document).on(
            'click',
            '[setbtn]',
            function() {
                const get = $(this).attr('get');
                if (get) {
                    $('input').val('')
                    $('[setbtn]').css('background', 'var(--r2)')
                    $(this).css('background', 'var(--r5)')
                    $('[setpage]').hide()
                    $('[setpagex="' + get + '"]').show()
                    const pick = $('.theme-GfSHDHASH122').attr('pick');
                    $('.theme-GfSHDHASH122').removeClass(pick);
                    $('.theme-GfSHDHASH122').removeAttr('pick')
                    $('.theme-GfSHDHASH122').attr('pick', get)
                    const pickadd = $('.theme-GfSHDHASH122').attr('pick');
                    $('.theme-GfSHDHASH122').addClass(pickadd)

                }

            }
        )
    </script>
</body>

</html>