<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Keyo Mobile</title>
    <!---//////////////////////////------jquery------/////////////////////////--->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!---/////////////////////////------sweetalert------/////////////////////////--->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.7/dist/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!---/////////////////////////------hammer------/////////////////////////--->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.js"></script>
    <!---/////////////////////////------aos------/////////////////////////--->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!---/////////////////////////------tippy------/////////////////////////--->
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
    <!---/////////////////////////------react------/////////////////////////--->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!---/////////////////////////------firebase------/////////////////////////--->
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-functions.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-performance.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-remote-config.js"></script>
    <!---/////////////////////////------MAIN SCRIPTS------/////////////////////////--->
    <script src="https://animekeyo.com/scripts/purl.js?clear1-111"></script>
    <script src="https://animekeyo.com/scripts/firebase.js?clear1-111"></script>
    <script src="https://animekeyo.com/scripts/tippy.js?clear1-111"></script>
    <script src="/scripts/download.js"></script>
    <stylesheet></stylesheet>
    <style>
        @import url("https://animekeyo.com/styles/style.css?clear-2342");
    </style>
</head>

<body>


    <style>
        .center-flex.theme-appbannerx0341 {
            background: var(--r1);
            width: -webkit-fill-available;
            height: -webkit-fill-available;
            max-width: 110rem;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            align-content: flex-start;
            flex-direction: row;
            gap: 2rem;
            overflow: hidden;
            flex-wrap: wrap;
        }
        
        .center-flex.full-bg.theme-appbannerx0342 {
            width: 16.333rem;
            height: 9rem;
            background: var(--r3);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .center-flex.theme-appbannerx03420 {
            width: -webkit-fill-available;
            height: 3rem;
            padding: 0rem 0.7rem;
            background: var(--r5);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            font-size: 0.7rem;
        }
        
        .center-flex.n2mafsdDFS {
            text-transform: uppercase;
            FONT-WEIGHT: 800;
            letter-spacing: 1px;
            width: fit-content;
            height: fit-content;
            display: flex;
            flex-direction: row;
            gap: 5px;
        }
        
        .center-flex.theme-appbannerx0342f {
            width: -webkit-fill-available;
            height: -webkit-fill-available;
        }
        
        .center-flex.absolute.full-wh.theme-appbannerx034 {
            height: fit-content;
            -ms-overflow-style: none;
            scrollbar-width: none;
            overflow-y: scroll;
        }
        
        .center-flex.absolute.full-wh.theme-appbannerx034::-webkit-scrollbar {
            display: none;
        }
        
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
            overflow-y: scroll;
        }
        
        body::-webkit-scrollbar {
            display: none;
        }
        
        .center-flex.absolute.n1mafsdDFSGHI {
            background: var(--r2);
            padding: 0.3rem 0.35rem;
            margin: 0.35rem;
            font-size: 0.7rem;
            border-radius: 3px;
        }
        
        .center-flex.pointer.noselect.n2mafsdDFS svg {
            fill: var(--c6);
            width: 0.8rem;
            height: 0.8rem;
            padding: 0.25rem;
            background: var(--r2);
            border-radius: 1rem;
        }
        
        @media only screen and (max-width:275px) {
            .center-flex.theme-appbannerx0341 {
                gap: 0.5rem;
                margin: 0rem 0.5rem;
            }
        }
    </style>
    <div class="center-flex absolute full-wh theme-appbannerx034">
        <style>
            header.center-flex.theme-header-freat-code34dsfD {
                width: -webkit-fill-available;
                height: 3.5rem;
                position: fixed;
                top: 0;
                left: 0;
                z-index: 5;
                background: var(--r2);
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                padding: 0rem 0.8rem;
            }
            
            .center-flex.theme-ZZZcode34dsfD4 {
                letter-spacing: 0.5px;
                padding: 0.9rem 1.2rem;
                background: var(--r5);
                font-size: 0.8rem;
                border-radius: 5px;
                text-transform: uppercase;
            }
            
            space[header] {
                margin-bottom: 4rem;
            }
        </style>
        <header class="center-flex theme-header-freat-code34dsfD">
            <div class="center-flex theme-ZZZcode34dsfD1">

            </div>
            <div class="center-flex theme-ZZZcode34dsfD2">
                <div class="center-flex theme-ZZZcode34dsfD3">

                </div>
                <div upload-banner class="center-flex theme-ZZZcode34dsfD4">
                    Upload Banner
                </div>
            </div>
        </header>
        <space header>

        </space>
        <div class="center-flex theme-appbannerx0341">



        </div>
    </div>
    <script>
        $.getJSON("json/banners.json?clear-11", function(json) {
            $.each(json, function(i, o) {

                $.each(o, function(i, o) {
                    const name = o.name;
                    const src = o.src;
                    const type = o.type;
                    if (o.type == 'gif') {
                        var datax = '<div class="center-flex absolute n1mafsdDFSGHI">GIF</div>'
                    } else if (o.type == 'png') {
                        var datax = '<div class="center-flex absolute n1mafsdDFSGHI">PNG</div>'
                    } else if (o.type == 'jpg') {
                        var datax = '<div class="center-flex absolute n1mafsdDFSGHI">JPG</div>'
                    }
                    const data =
                        '<div class="center-flex full-bg relative theme-appbannerx0342">' +
                        datax +
                        '<div style="background-image:url(' + src + ')" class="center-flex full-bg theme-appbannerx0342f">' +

                        '</div>' +
                        '<div class="center-flex  theme-appbannerx03420">' +
                        '<div class="center-flex n1mafsdDFS">' +
                        name +
                        '</div>' +
                        '<div class="center-flex pointer noselect n2mafsdDFS">' +
                        '<svg apply-banner href="' + src + '" tippy data-tippy-content="Set Profile Banner" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.5 5.6L10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29c-.39-.39-1.02-.39-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41l-2.33-2.35zm-1.03 5.49l-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"/></svg>' +
                        '<svg download-banner href="' + src + '" tippy data-tippy-content="Download" title="Download" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><rect fill="none" height="24" width="24"/></g><g><path d="M16.59,9H15V4c0-0.55-0.45-1-1-1h-4C9.45,3,9,3.45,9,4v5H7.41c-0.89,0-1.34,1.08-0.71,1.71l4.59,4.59 c0.39,0.39,1.02,0.39,1.41,0l4.59-4.59C17.92,10.08,17.48,9,16.59,9z M5,19c0,0.55,0.45,1,1,1h12c0.55,0,1-0.45,1-1s-0.45-1-1-1H6 C5.45,18,5,18.45,5,19z"/></g></svg>' +
                        '</div>' +
                        '</div>' +
                        '</div>';
                    $('.theme-appbannerx0341').append(data)

                })
            })
        });
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                const user = firebase.auth().currentUser;
                const data = firebase.database().ref('/data/users/' + user.uid);
                $(document).on(
                    'click',
                    '[apply-banner]',
                    function() {
                        const link = $(this).attr('href');
                        data.update({
                            banner: link,
                        }).then(function() {
                            swal('Done', 'Your Banner as been update')
                        }).catch((error) => {
                            var errorCode = error.code;
                            var errorMessage = error.message;
                            swal(errorMessage)
                        });
                    }
                )
                $(document).on(
                    'click',
                    '[download-banner]',
                    function() {
                        download($(this).attr('href'));
                    }
                )
                $(document).on(
                    'click',
                    '[upload-banner]',
                    function() {

                        $('body').prepend('<input banner style="display: none;" type="file" class="file">')
                        $('[banner]').trigger('click');
                        $(document).on("change", 'input[type="file"][banner]', function() {

                            var $files = $(this).get(0).files;

                            if ($files.length) {

                                // Reject big files
                                if ($files[0].size > $(this).data("max-size") * 1024) {
                                    console.log("Please select a smaller file");
                                    return false;
                                }

                                // Replace ctrlq with your own API key
                                var apiUrl = 'https://api.imgur.com/3/image';
                                var apiKey = '4b208caca83b4c4';

                                var formData = new FormData();
                                formData.append("image", $files[0]);

                                var settings = {
                                    "async": true,
                                    "crossDomain": true,
                                    "url": apiUrl,
                                    "method": "POST",
                                    "datatype": "json",
                                    "headers": {
                                        "Authorization": "Client-ID " + apiKey
                                    },
                                    "processData": false,
                                    "contentType": false,
                                    "data": formData,
                                    beforeSend: function(xhr) {
                                        swal({
                                            text: "Uploading",
                                            buttons: false,
                                            closeOnClickOutside: false,
                                        });
                                    },
                                    success: function(res) {
                                        console.log(res.data.link);
                                        $('body').prepend('<imgoi src="' + res.data.link + '" style="display:none">').then(function() {
                                            swal('Done')
                                            $('[banner]').remove();
                                        })

                                        ///

                                    },
                                    error: function() {
                                        $('[banner]').remove();
                                        swal("Failed | 上传失败 | MAKO");
                                    }
                                }
                                $.ajax(settings).done(function(response) {
                                    console.log("Done | 成功");
                                    swal({
                                        title: "Done",
                                        icon: "success",
                                        timer: 1500,
                                    });
                                });
                            }
                        });
                        (async function() {
                            const {
                                value: formValues
                            } = await Swal.fire({
                                title: 'Multiple inputs',
                                html: '<input id="titlexx" type="text" class="swal2-input" required>' +
                                    '<select id="optionxxx" required>' +
                                    '<option value="gif">GIF</option>' +
                                    '<option value="png">PNG</option>' +
                                    '<option value="jpg">JPG</option>' +
                                    '</select>',
                                focusConfirm: false,
                                preConfirm: () => {
                                    return [{
                                            "title": document.getElementById('titlexx').value,

                                            "type": document.getElementById('optionxxx').value,
                                        }


                                    ]
                                }
                            })

                            if (formValues) {
                                const DFCSEXCVRFDCFF = new Date();
                                const DFCSEXCVRFDCFF2 = DFCSEXCVRFDCFF.getTime();
                                const DFCSEXCVRFDCFF23 = DFCSEXCVRFDCFF.getFullYear();
                                const DFCSEXCVRFDCFF234 = DFCSEXCVRFDCFF.getMonth();
                                const DFCSEXCVRFDCFF2345 = DFCSEXCVRFDCFF.getMilliseconds();
                                const DFCSEXCVRFDCFF23456 = DFCSEXCVRFDCFF.getDay();
                                const bannerId = DFCSEXCVRFDCFF2 + "" + DFCSEXCVRFDCFF23 + "" + DFCSEXCVRFDCFF234 + "" + DFCSEXCVRFDCFF2345 + "" + DFCSEXCVRFDCFF23456;
                                const title = formValues[0].title;
                                const href = $('imgoi').attr('src');
                                const userid = firebase.auth().currentUser.uid;
                                const type = formValues[0].type;
                                const database = firebase.database().ref('/data/banners/' + bannerId);
                                if (title) {
                                    if (href) {
                                        database.update({
                                            title: title,
                                            href: href,
                                            type: type,
                                            userid: userid,
                                            bannerId: bannerId,
                                        }).then(function() {
                                            swal('Done', 'Your banner as been uploaded')
                                            $('imgoi').remove();
                                        });
                                        console.log({
                                            "title": title,
                                            "href": href,
                                            "type": type,
                                            "userid": userid,
                                            "bannerId": bannerId,
                                        })
                                    }
                                }

                            }
                        })()
                    }
                )

            } else {

            }
        });
    </script>
</body>

</html>